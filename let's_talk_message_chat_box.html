<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Contact Me</title>
  <link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet" />
  <script src="https://cdn.emailjs.com/dist/email.min.js"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="chat_box.css">
</head>
<body>
  <header class="header">
    <a class="logo" href="#">Irfan.</a>

    <!-- desktop nav -->
    <nav class="navbar-desktop">
      <a id="nav-home" href="index.html">Home</a>
      <a id="nav-about" href="about.html">About Me</a>
      <a id="nav-education" href="Resume.html">Education</a>
      <a id="nav-skills" href="Skills.html">Skills</a>
      <a id="nav-cv" href="Nouveau dossier/Irfan_CVmot-8.pdf">CV</a>
    </nav>

    <div class="header-right">
      <button id="translateBtn" class="translate-btn" aria-pressed="false" title="Toggle language">EN</button>

      <!-- burger button (mobile) -->
      <button id="menuBtn" aria-label="Open menu" aria-expanded="false" title="Menu">
        <div class="menu__icon">
          <span></span>
          <span></span>
          <span></span>
        </div>
      </button>
    </div>
  </header>

  <!-- overlay -->
  <div class="overlay" id="overlay" aria-hidden="true"></div>

  <!-- mobile nav -->
  <nav class="mobile-nav" id="mobileNav" aria-hidden="true" aria-label="Mobile navigation">
    <button class="close-btn" id="closeBtn" aria-label="Close menu">✕</button>

    <div class="nav-inner">
      <a id="m-nav-home" href="index.html">Home</a>
      <a id="m-nav-about" href="about.html">About Me</a>
      <a id="m-nav-education" href="Resume.html">Education</a>
      <a id="m-nav-skills" href="Skills.html">Skills</a>
      <a id="m-nav-cv" href="Nouveau dossier/Irfan_CVmot-8.pdf">CV</a>
    </div>
  </nav>

  <section class="home">
    <div class="home-content">
      <h1>Contact Me</h1>
      <form id="contactForm" class="contact-form" action="#" method="POST">
        <label for="email">Email *</label>
        <input id="email" name="email" type="email" required>

        <label for="phone">Phone *</label>
        <input id="phone" name="phone" type="tel" required>

        <label for="subject">Subject *</label>
        <input id="subject" name="subject" type="text" required>

        <label for="message">Message *</label>
        <textarea id="message" name="message" rows="4" required></textarea>

        <button type="submit" class="send-btn">
          <svg width="20" height="20" viewBox="0 0 24 24" aria-hidden="true">
            <path fill="none" d="M0 0h24v24H0z"></path>
            <path fill="currentColor" d="M1.946 9.315c-.522-.174-.527-.455.01-.634l19.087-6.362c.529-.176.832.12.684.638l-5.454 19.086c-.15.529-.455.547-.679.045L12 14l6-8-8 6-8.054-2.685z"></path>
          </svg>
          <span>Send</span>
        </button>
      </form>

      <div id="successMessage" class="success-message">Your message has been sent!</div>
    </div>
  </section>

  <footer>
    <div class="socials">
      <a href="#"><i class='bx bxl-facebook-circle'></i></a>
      <a href="https://www.linkedin.com/in/irfan-khan-050522300/"><i class='bx bxl-linkedin-square'></i></a>
      <a href="#"><i class='bx bxl-twitter'></i></a>
    </div>
    <p>&copy; 2024 Irfan Khan. All rights reserved.</p>
  </footer>

  <script>
    // EmailJS init
    (function(){ try { emailjs.init("9RiO1EMmVFptFknAB"); } catch(e){ console.warn('EmailJS init failed', e); } })();

    // Form submit via EmailJS
    document.getElementById('contactForm').addEventListener('submit', function (e) {
      e.preventDefault();
      const btn = this.querySelector('.send-btn');
      btn.disabled = true; btn.setAttribute('aria-busy','true');
      emailjs.sendForm("service_21pc3zs","template_luj2d4h", this)
        .then(() => {
          document.getElementById('successMessage').style.display = 'block';
          this.reset();
          btn.disabled = false; btn.removeAttribute('aria-busy');
        })
        .catch(() => {
          alert('Error: Message not sent. Please try again later.');
          btn.disabled = false; btn.removeAttribute('aria-busy');
        });
    });

    // Language toggle (EN/FR)
    const translateBtn = document.getElementById('translateBtn');
    let isFrench = false;
    function applyLanguage(fr) {
      isFrench = !!fr; translateBtn.setAttribute('aria-pressed', String(!!fr));
      translateBtn.innerText = fr ? 'FR' : 'EN';
      document.querySelector('.home-content h1').innerText = fr ? 'Contactez-moi' : 'Contact Me';
      document.querySelector('.contact-form label[for="email"]').innerText = fr ? 'Email *' : 'Email *';
      document.querySelector('.contact-form label[for="phone"]').innerText = fr ? 'Téléphone *' : 'Phone *';
      document.querySelector('.contact-form label[for="subject"]').innerText = fr ? 'Sujet *' : 'Subject *';
      document.querySelector('.contact-form label[for="message"]').innerText = fr ? 'Message *' : 'Message *';
      document.querySelector('.contact-form button span').innerText = fr ? 'Envoyer' : 'Send';
      document.getElementById('nav-home').innerText = fr ? 'Accueil' : 'Home';
      document.getElementById('nav-about').innerText = fr ? 'À propos' : 'About Me';
      document.getElementById('nav-education').innerText = fr ? 'Éducation' : 'Education';
      document.getElementById('nav-skills').innerText = fr ? 'Compétences' : 'Skills';
      document.getElementById('nav-cv').innerText = 'CV';
      document.getElementById('m-nav-home').innerText = fr ? 'Accueil' : 'Home';
      document.getElementById('m-nav-about').innerText = fr ? 'À propos' : 'About Me';
      document.getElementById('m-nav-education').innerText = fr ? 'Éducation' : 'Education';
      document.getElementById('m-nav-skills').innerText = fr ? 'Compétences' : 'Skills';
      document.getElementById('m-nav-cv').innerText = 'CV';
    }
    translateBtn.addEventListener('click', () => applyLanguage(!isFrench));
    applyLanguage(false); // default EN

    // elements
    const menuBtn = document.getElementById('menuBtn');
    const overlay = document.getElementById('overlay');
    const mobileNav = document.getElementById('mobileNav');
    const closeBtn = document.getElementById('closeBtn');

    // open menu
    function openMenu() {
      document.body.classList.add('menu-open');
      menuBtn.setAttribute('aria-expanded','true');
      overlay.setAttribute('aria-hidden','false');
      mobileNav.setAttribute('aria-hidden','false');
      document.documentElement.style.overflow = 'hidden';
      document.body.style.overflow = 'hidden';
      setTimeout(() => closeBtn.focus(), 180);
    }

    // close menu
    function closeMenu() {
      document.body.classList.remove('menu-open');
      menuBtn.setAttribute('aria-expanded','false');
      overlay.setAttribute('aria-hidden','true');
      mobileNav.setAttribute('aria-hidden','true');
      document.documentElement.style.overflow = '';
      document.body.style.overflow = '';
      menuBtn.focus();
    }

    // toggle on burger click
    menuBtn.addEventListener('click', () => {
      if (document.body.classList.contains('menu-open')) closeMenu();
      else openMenu();
    });

    // close on overlay or close button
    overlay.addEventListener('click', closeMenu);
    closeBtn.addEventListener('click', closeMenu);

    // close when clicking any nav link
    document.querySelectorAll('.nav-inner a').forEach(a => {
      a.addEventListener('click', () => closeMenu());
    });

    // ESC to close
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && document.body.classList.contains('menu-open')) closeMenu();
    });
  </script>
</body>
</html>